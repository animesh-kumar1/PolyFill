function throttle(fn, delay, { leading = true, trailing = true } = {}) {
        let lastCallTime = 0;
        let timer = null;
        let lastArgs, lastThis;
        return function (...args) {
            const now = Date.now();
            if (!lastCallTime && leading === false) {
                lastCallTime = now;
            }
            const remaining = delay - (now - lastCallTime);
            lastArgs = args;
            lastThis = this;
            if (remaining <= 0 || remaining > delay) {
                if (timer) {
                    clearTimeout(timer);
                    timer = null;
                }
                lastCallTime = now;
                fn.apply(lastThis, lastArgs);
            } else if (trailing && !timer) {
                timer = setTimeout(() => {
                    lastCallTime = leading === false ? 0 : Date.now();
                    timer = null;
                    fn.apply(lastThis, lastArgs);
                }, remaining);
 
            }
 
        };
 
    }